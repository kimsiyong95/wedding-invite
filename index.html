
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>김시용 ♥ 최다희 모바일 청첩장</title>
  <base href="/wedding-invite/">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/lightSlider.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/calendar.css">
  <link rel="stylesheet" href="css/location.css">
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/snow.css">
  <link rel="stylesheet" href="css/comment.css">
  <link href="https://fonts.googleapis.com/earlyaccess/kopubbatang.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/earlyaccess/notosanskr.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dongle:wght@300;400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
</head>
<body>
    <audio id="weddingMusic" autoplay muted loop>
        <source src="music/backmusic.mp3" type="audio/mpeg">
    </audio>
   <div id="wrap" class="card-bg">
   <section class="main-visual">
       <div class="top">
           <div class="visual-block title-text">
               <p class="letter">약</p>
               <p class="letter2">속</p>
           </div>
           <div class="visual-block info-text">
               <p class="wedding-date">2026년 12월 12일 토요일 오후 2시</p>
               <p class="wedding-names">
                   <span class="vs-name">김시용</span>
                   <span class="vs-dot">·</span>
                   <span class="vs-name">최다희</span>
               </p>
           </div>
           <div class="visual-block photo-area">
               <img src="images/main_photo_2.png" alt="대표 이미지">
           </div>
       </div>
   </section>

    <section class="greeting">
        <div class="invitation-title">
            <img src="images/invitation.png" alt="Invitation">
        </div>
        <div class="greeting-block">
            <p class="message">
                서로를 향한 마음을 오랜 시간 간직해왔고,<br>
                이제는 같은 길 위에서 하나된 걸음을 내딛고자 합니다.<br>
                진심을 담은 이 약속 위에<br>
                따뜻한 축복으로 함께해 주시면 감사하겠습니다.
            </p>
        </div>
    </section>

    <section class="families">
        <div class="family-info">
            <div class="family-block">
                <div class="family-row">
                    <p class="family-parents">
                        <span class="family-name">김병빈</span>
                        <span class="vs-dot">·</span>
                        <span class="family-name">장미라</span>
                    </p>
                    <p class="family-desc">의</p>
                    <p class="family-role">장남</p>
                    <p class="family-child">시용</p>
                </div>
                <div class="family-row">
                    <p class="family-parents">
                        <span class="family-name">최종남</span>
                        <span class="vs-dot">·</span>
                        <span class="family-name">지미아</span>
                    </p>
                    <p class="family-desc">의</p>
                    <p class="family-role">장녀</p>
                    <p class="family-child">다희</p>
                </div>
            </div>
        </div>
    </section>

   <section class="banner-section">
       <div class="banner-div">
           <p class="txt">소 중 한 &nbsp; 당 신 을 &nbsp; 초 대 합 니 다</p>
       </div>
   </section>

   <section class="contact">
       <div class="contact-row groom">
           <p>신랑 김시용</p>
           <div class="contact-buttons">
               <a href="tel:01012345678" class="call"><i class="fa-solid fa-phone"></i></a>
               <a href="sms:01012345678" class="sms"><i class="fa-regular fa-comment"></i></a>
           </div>
       </div>
       <div class="contact-row bride">
           <p>신부 최다희</p>
           <div class="contact-buttons">
               <a href="tel:01087654321" class="call"><i class="fa-solid fa-phone"></i></a>
               <a href="sms:01087654321" class="sms"><i class="fa-regular fa-comment"></i></a>
           </div>
       </div>
   </section>

   <section class="honju-contact">
       <h2 class="honju-title">혼주에게 연락하기</h2>
       <div class="honju-columns">

           <!-- 신랑 측 -->
           <div class="honju-column groom-side">
               <h3 class="honju-side-title">신랑 측 혼주</h3>

               <div class="honju-box">
                   <p class="honju-name"><span>아버지</span> <strong>김병빈</strong></p>
                   <div class="honju-buttons">
                       <a href="tel://010-0000-0000" class="call"><i class="fa fa-phone"></i></a>
                       <a href="sms://010-0000-0000" class="sms"><i class="fa fa-envelope"></i></a>
                   </div>
               </div>

               <div class="honju-box">
                   <p class="honju-name"><span>어머니</span> <strong>장미라</strong></p>
                   <div class="honju-buttons">
                       <a href="tel://010-0000-0000" class="call"><i class="fa fa-phone"></i></a>
                       <a href="sms://010-0000-0000" class="sms"><i class="fa fa-envelope"></i></a>
                   </div>
               </div>
           </div>

           <!-- 신부 측 -->
           <div class="honju-column bride-side">
               <h3 class="honju-side-title">신부 측 혼주</h3>

               <div class="honju-box">
                   <p class="honju-name"><span>아버지</span> <strong>최종남</strong></p>
                   <div class="honju-buttons">
                       <a href="tel://010-0000-0000" class="call"><i class="fa fa-phone"></i></a>
                       <a href="sms://010-0000-0000" class="sms"><i class="fa fa-envelope"></i></a>
                   </div>
               </div>

               <div class="honju-box">
                   <p class="honju-name"><span>어머니</span> <strong>지미아</strong></p>
                   <div class="honju-buttons">
                       <a href="tel://010-0000-0000" class="call"><i class="fa fa-phone"></i></a>
                       <a href="sms://010-0000-0000" class="sms"><i class="fa fa-envelope"></i></a>
                   </div>
               </div>
           </div>

       </div>
   </section>

       <section class="calendar-section">
           <div class="calendar-wrap">
               <div class="calendar-header">
                   <h2 class="calendar-title">예식 일정</h2>
               </div>
               <div class="calendar-body">
                   <div class="calendar-month">
                       <span class="calendar-month-text">2026년</span>
                       <span class="calendar-month-text">12월</span>
<!--                       <span class="calendar-month-text">12일</span>-->
                   </div>
                   <div class="calendar-grid">
                       <table class="calendar-table">
                           <thead>
                           <tr>
                               <th>일</th>
                               <th>월</th>
                               <th>화</th>
                               <th>수</th>
                               <th>목</th>
                               <th>금</th>
                               <th>토</th>
                           </tr>
                           </thead>
                           <tbody>
                           <tr>
                               <td class="sun">29</td> <!-- 11월 -->
                               <td>30</td>             <!-- 11월 -->
                               <td>1</td>
                               <td>2</td>
                               <td>3</td>
                               <td>4</td>
                               <td class="sat">5</td>
                           </tr>
                           <tr>
                               <td class="sun">6</td>
                               <td>7</td>
                               <td>8</td>
                               <td>9</td>
                               <td>10</td>
                               <td>11</td>
                               <td class="sat active"><span class="active-dot">12</span></td>
                           </tr>
                           <tr>
                               <td class="sun">13</td>
                               <td>14</td>
                               <td>15</td>
                               <td>16</td>
                               <td>17</td>
                               <td>18</td>
                               <td class="sat">19</td>
                           </tr>
                           <tr>
                               <td class="sun">20</td>
                               <td>21</td>
                               <td>22</td>
                               <td>23</td>
                               <td>24</td>
                               <td>25</td>
                               <td class="sat">26</td>
                           </tr>
                           <tr>
                               <td class="sun">27</td>
                               <td>28</td>
                               <td>29</td>
                               <td>30</td>
                               <td>31</td>
                               <td class="empty"></td>
                               <td class="empty"></td>
                           </tr>
                           </tbody>
                       </table>
                   </div>
                   <div class="calendar-date">
                       <span class="calendar-day">토요일</span>
                       <span class="calendar-time">오후 2:00</span>
                   </div>
               </div>
           </div>
       </section>



       <section class="gallery-section type2">
           <div class="gallery-title sec-tit">
               <img src="images/gallery.png" alt="gallery">
           </div>
           <div class="contain gallery-contain">
               <ul class="type2-list">
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/1.png">
                           <div class="box" style="background-image:url('images/gallery/temp/1.png');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/2.png">
                            <div class="box" style="background-image:url('images/gallery/temp/2.png');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/3.jpg">
                           <div class="box" style="background-image:url('images/gallery/temp/3.jpg');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/4.png">
                           <div class="box" style="background-image:url('images/gallery/temp/4.png');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/5.png">
                         <div class="box" style="background-image:url('images/gallery/temp/5.png');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/6.jpg">
                           <div class="box" style="background-image:url('images/gallery/temp/6.jpg');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/7.jpg">
                         <div class="box" style="background-image:url('images/gallery/temp/7.jpg');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/8.jpg">
                          <div class="box" style="background-image:url('images/gallery/temp/8.jpg');"></div>
                       </a>
                   </li>
                   <li>
                       <a data-fancybox="gallery" href="images/gallery/temp/9.jpg">
                        <div class="box" style="background-image:url('images/gallery/temp/9.jpg');"></div>
                       </a>
                   </li>
                   <!-- 이미지 추가 li ... -->
               </ul>
               <p class="ex">이미지를 클릭하시면 확대보기가 가능합니다.</p>
           </div>
       </section>

       <section class="location-section">
           <div class="location-title">
               <img src="images/location.png" alt="location">
           </div>
           <div class="map-area">
               <div class="head" onclick="copyToClipboard(this)" data-copy="충남 천안시 동남구 다가말2길 104">
                   <div class="tit">더포레웨딩홀</div>
                   <div class="txt">
                       <p>충남 천안시 동남구 다가말2길 104</p>
                       <p>Tel. 041-574-5000</p>
                   </div>
                   <p class="copy-guide">📋 주소를 클릭하면 복사됩니다</p>
               </div>
               <div id="map_canvas" class="map">
                   <a href="https://map.kakao.com/?q=천안 더포레웨딩홀" target="_blank">
                       <img class="map" src="http://t1.daumcdn.net/roughmap/imgmap/7c20f5f0aea7181adb52981cf60c6c121103583fe62e2e3136f660d127ea9c5c" width="100%" height="100%">
                   </a>
               </div>
<!--               <div class="link">-->
<!--                   <ul>-->
<!--                       <li><a href="https://tmap.co.kr" class="tmap" target="_blank">티맵</a></li>-->
<!--                       <li><a href="https://kakaonavi.kakao.com" class="kakaonavi" target="_blank">카카오내비</a></li>-->
<!--                       <li><a href="https://map.naver.com" class="navermap" target="_blank">네이버지도</a></li>-->
<!--                       <li><a href="https://map.kakao.com" class="kakaomap" target="_blank">카카오맵</a></li>-->
<!--                   </ul>-->
<!--               </div>-->
           </div>
           <div class="info">
               <div class="contain">
                   <dl>
                       <dt>지하철안내</dt>
                       <dd></dd>
                   </dl>
                   <dl>
                       <dt>버스안내</dt>
                       <dd>간선버스 : </dd>
                       <dd>지선버스 : </dd>
                       <dd>마을버스 : </dd>
                   </dl>
                   <dl>
                       <dt>주차안내</dt>
                       <dd></dd>
                   </dl>
                   <dl>
                       <dt>기타안내</dt>
                       <dd></dd>
                   </dl>
               </div>
           </div>
       </section>

       <section class="account-section">
           <div class="account-title sec-tit">
               <img src="images/account.png" alt="account">
           </div>
           <div class="sec-txt">축하의 마음을 담아 축의금을 전달해보세요.</div>

           <div class="ib">
               <div class="row">
                   <div class="slsb-tit">신랑측 마음</div>
                   <div class="slsb-btn">
                       <button class="com-btn acc sl" onclick="openAccountModal('신랑', [
          { label: '아버지', bank: '농협', number: '123-4567-8901', owner: '김병빈' },
          { label: '어머니', bank: '신한', number: '456-7890-1234', owner: '장미라' },
          { label: '신랑', bank: '국민', number: '789-0123-4567', owner: '김시용' }
        ])">계좌번호 보기</button>
                   </div>
               </div>

               <div class="row">
                   <div class="slsb-tit">신부측 마음</div>
                   <div class="slsb-btn">
                       <button class="com-btn acc sb" onclick="openAccountModal('신부', [
          { label: '아버지', bank: '우리', number: '321-6547-8901', owner: '최종남' },
          { label: '어머니', bank: '농협', number: '654-9870-3210', owner: '지미아' },
          { label: '신부', bank: '카카오', number: '987-6543-2109', owner: '최다희' }
        ])">계좌번호 보기</button>
                   </div>
               </div>
           </div>
       </section>


       <section class="guest-message-slider">
           <h2 class="slider-title">📬 축하 메시지를 남겨주세요</h2>
           <form id="messageForm" class="message-form">
               <input type="text" id="authorInput" placeholder="이름" required />
               <textarea id="messageInput" placeholder="축하 메시지를 입력하세요" required></textarea>
               <input type="password" id="passwordInput" placeholder="비밀번호" required />
               <button type="submit">메시지 남기기</button>
           </form>
           <div class="slider-wrapper">
               <div class="message-slider-container swiper">
                   <div id="messageWrapper" class="swiper-wrapper">
                   </div>
                   <!-- 슬라이드 내비게이션 -->
                   <div class="swiper-pagination"></div>
               </div>
           </div>
       </section>



       <!-- 모달 -->
       <div class="account-modal" id="accountModal">
           <div class="modal-content">
               <p class="modal-title" id="modalTitle"></p>
               <div class="modal-account-list" id="modalAccountList"></div>
               <button class="modal-close" onclick="closeAccountModal()">닫기</button>
           </div>
       </div>

       <!-- 토스트 -->
       <div id="toast" class="toast">복사되었습니다!</div>

  </div>

    <div id="introOverlay" class="intro-overlay">
        <div class="intro-content">
            <p class="intro-text">
                <span class="emoji">김시용</span>
                <span class="icon">💌</span>
                <span class="emoji">최다희의 결혼식에 귀하를 정중히 초대합니다.</span>
            </p>
            <button id="enterBtn" class="enter-btn">입장하기</button>
        </div>
    </div>


  <canvas id="snowCanvas"></canvas>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <!-- Firebase App (core) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <!-- Firebase Firestore -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="js/main.js"></script>
    <script>
        $(function () {
            const firebaseConfig = {
                apiKey: "AIzaSyA5omovIk1jO6pElM-M-a3IvoA_Ekc31kM",
                authDomain: "siyong-wedding.firebaseapp.com",
                projectId: "siyong-wedding",
                storageBucket: "siyong-wedding.firebasestorage.app",
                messagingSenderId: "208773929873",
                appId: "1:208773929873:web:46d9f175d1685b382b9830",
                measurementId: "G-TKHCSGMXXM"
            };

            // Firebase 초기화
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();

            // 날짜 달력
            $("#calendar").datepicker({
                inline: true,
                defaultDate: new Date(2026, 11, 12),
                beforeShowDay: function (date) {
                    const highlight = date.getDate() === 12 && date.getMonth() === 11 && date.getFullYear() === 2026;
                    return [true, highlight ? "ui-state-active" : ""];
                },
                showOtherMonths: true,
                selectOtherMonths: true
            });

            // 오디오 자동재생
            const audio = document.getElementById("weddingMusic");
            audio.play().catch(() => {});
            document.addEventListener("click", function handler() {
                audio.muted = false;
                audio.play().catch(() => {});
                document.removeEventListener("click", handler);
            });

            document.getElementById("enterBtn").addEventListener("click", () => {
                const overlay = document.getElementById("introOverlay");
                overlay.style.opacity = "0";
                setTimeout(() => overlay.style.display = "none", 1000);
                audio.muted = false;
                audio.play().catch(() => {});
            });

            // ✅ Swiper 슬라이더 초기화
            const swiper = new Swiper('.message-slider-container', {
                slidesPerView: 'auto',
                spaceBetween: 16,
                centeredSlides: true,
                centeredSlidesBounds: false,
                loop: false,
                on: {
                    init: () => {
                        setTimeout(() => swiper.slideTo(0, 0), 100);
                    }
                }
            });

            const messageWrapper = document.getElementById("messageWrapper");

            // 메시지 등록
            document.getElementById("messageForm").addEventListener("submit", function (e) {
                e.preventDefault();
                const name = document.getElementById("authorInput").value.trim();
                const msg = document.getElementById("messageInput").value.trim();
                const pwd = document.getElementById("passwordInput").value.trim();
                if (!name || !msg || !pwd) return;

                db.collection("messages").add({
                    author: name,
                    message: msg,
                    password: pwd,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                }).then(() => {
                    alert("메시지가 등록되었습니다 😊");
                    document.getElementById("messageForm").reset();
                    loadMessages();
                });
            });

            // 메시지 불러오기
            function loadMessages() {
                const slides = [];

                db.collection("messages")
                    .orderBy("timestamp", "desc")
                    .get()
                    .then((querySnapshot) => {
                        querySnapshot.forEach((doc) => {
                            const data = doc.data();
                            const date = data.timestamp?.toDate();
                            const timeStr = date
                                ? `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`
                                : "";

                            const html = `
              <div class="swiper-slide message-card">
                <button class="delete-btn" aria-label="삭제" data-id="${doc.id}">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#c7a37b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10" stroke="#c7a37b" fill="#f8f1e6"/>
                    <line x1="15" y1="9" x2="9" y2="15" />
                    <line x1="9" y1="9" x2="15" y2="15" />
                  </svg>
                </button>
                <p class="msg-text">${data.message}</p>
                <p class="msg-author">- ${data.author}</p>
                <span class="msg-time">${timeStr}</span>
              </div>
            `;
                            slides.push(html);
                        });

                        swiper.removeAllSlides();
                        swiper.appendSlide(slides);
                        swiper.update();
                        swiper.setTranslate(0);  // 좌표 초기화
                        swiper.slideTo(0, 0);     // 맨 처음 슬라이드로 이동
                    });
            }

            // 삭제 기능
            document.addEventListener("click", function (e) {
                const btn = e.target.closest(".delete-btn");
                if (btn) {
                    const id = btn.getAttribute("data-id");
                    const input = prompt("삭제하려면 비밀번호를 입력하세요");
                    if (!input) return;

                    db.collection("messages").doc(id).get().then(doc => {
                        if (doc.exists && doc.data().password === input) {
                            db.collection("messages").doc(id).delete().then(() => {
                                alert("삭제되었습니다");
                                loadMessages();
                            });
                        } else {
                            alert("비밀번호가 일치하지 않습니다");
                        }
                    });
                }
            });

            loadMessages();
        });
    </script>

</body>
</html>
